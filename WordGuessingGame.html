<!DOCTYPE html>
<html lang="en-us">

<head>
                <meta charset="UTF-8">
                <title>Word Guessing Game</title>
                <link rel="stylesheet"  type="text/css" href="assets/css/style.css">
</head>



<body>

<script type="text/javascript">

var score = 0;
var round = Math.floor(Math.random() * 7);
var i = 0;   
var words = ["usa", "japan", "italy", "germany", "england", "china", "scotland"];
const lengths = words.length;
var invalid = ["0","1","2","3","4","5","6","7","8","9","enter","[","]","tab","capslock", 
"shift","control","alt"];
var used = [];
var usedwrong = [];
var guesses = 6 ; 
var index;
var j = round;

//printing out the underscores
function underDash(){
if (i < words[j].length) {
        for (i = 0; i < words[j].length; i++) {
                var targetDiv = document.getElementById("current");
                var newDiv = document.createElement("div");
                newDiv.textContent = "_";
                newDiv.setAttribute("class", "dash");
                newDiv.setAttribute("id", "current" + (i+1))
                targetDiv.appendChild(newDiv);
        } 
}
}

//Selecting which flag to show
function rounds(){
if (round == 0) {
        document.getElementById("img").src="assets/images/USA.png";
        }
        else if (round == 1){
        document.getElementById("img").src="assets/images/Japan.png";
        }
        else if (round == 2){
        document.getElementById("img").src="assets/images/Italy.png";
        }
        else if (round == 3){
        document.getElementById("img").src="assets/images/Germany.png";
        }
        else if (round == 4){
        document.getElementById("img").src="assets/images/England.png";
        }
        else if (round == 5){
        document.getElementById("img").src="assets/images/China.png";
        }
        else if (round == 6){
        document.getElementById("img").src="assets/images/Scotland.png";
        }
}

function winRound() {
if (used.length == words[j].length){
        round = Math.floor(Math.random() * 7);        
        score++;
        for(i = 0; i < words[j].length; i++){
        used.splice(i);
        }
        for(i = 0; i < words[j].length; i++){
        usedwrong.splice(i);
        }
        words = ["usa", "japan", "italy", "germany", "england", "china", "scotland"];
        document.getElementById("Text").innerHTML = words[j] + " was correct!";
        guesses = 6; 
        for(i = 0; i < words[j].length; i++){
        document.getElementById("current" + (i+1)).remove();
        }
        i = 0;
        return score;
        }
}

document.onkeyup = function(event) {

        j = round;
        var letter = event.key.toLowerCase();

        if (i < words[j].length) {
                underDash();
        }

        //Win the grand prize
        if (score >= 6) {
        document.getElementById("Text").innerHTML = "You Win!";
        document.getElementById("img").src="assets/images/Win.png";
        //new Audio().play
        return false;
        }
                //compares the key to letters of the round's country flag
                if (words[j].indexOf(letter) > -1) {
                        var x = words[j].indexOf(letter) + 1;
                        var y = 0;
                        document.getElementById("current" + x).innerHTML = letter; 
                        used.push(letter);
                        words[j] = words[j].replace(letter," ")
                        }
                //compares the key input to see if the key is invalid
                else if (invalid.indexOf(letter) > -1) {
                }   
                //compares the key input to see if the key has been used
                else if (used.indexOf(letter) > -1) {
                        return false;
                }  
                //compares the key input to see if the key has been used     
                else if (usedwrong.indexOf(letter) > -1) {
                        return false;
                }
                //compares the key input to see if the input is not correct
                else  {
                        usedwrong.push(letter);
                        guesses = guesses - 1;
                } 

        //Declaring a victory    
        winRound();

        //Declaring a loss
        if (guesses < 1) {
                alert("you lose!");   
        }

        rounds();

        document.getElementById("score").innerHTML = "Score: " + "<br>" + "<br>" + score;
        document.getElementById("guessesleft").innerHTML = "Guesses left: " + "<br>" + "<br>" + guesses;
        //document.getElementById("current").innerHTML = "Current Word: ";
        document.getElementById("latter").innerHTML = "Letters already used: " + usedwrong;
        
}

function main() {
underDash();
rounds();

}

</script>

<h1>Word Guessing Game: Guess The Flag!</h1>
<div class="box">
        <img id="img" src="assets/images/QuestionMark.png">
</div>
<div class="box2">
<h2 id="Text">Press any key to start!</h2>
<p id="score">Score: </p>
<p id="guessesleft">Guesses left: </p>
<p id="currents">Current Word: </p>
<p id="current"></p>
<p id="latter">Letters already used:<br></p>
<p id="wrong1"></p>
</div>


</body>