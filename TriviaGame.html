<!DOCTYPE html>
<html lang="en-us">

<head>
                <meta charset="UTF-8">
                <title>Trivia Game</title>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
                <link rel="stylesheet" type="text/css" href="assets/css/TriviaStyle.css">
                <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" 
                integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>



<body>

<script>

var questions = {
    Questions: [{
    question: "What is the strongest Z figher?",
    title: "The strongest Z warrior is: ",
    items: ["Goku", "Vegeta", "Trunks", "Gohan", "Piccolo"]
    },
    {
    question: "Who is the strongest in One Piece??",
    title: "The strongest in One Piece is: ",
    items: ["Luffy", "Nami", "Robin", "Zoro", "Sanji"]
    }]
}

var correctAnswers = ["Goku", "Luffy", 2 ,3, 4];

var number = 30;
var intervalId;
var correct = 0;
var incorrect = 0;
var selection;
var i;
var round = 0;


$(document).ready(function() {

console.log(correctAnswers[round]);

//code for running the timer
function run() {
    clearInterval(intervalId);
    intervalId = setInterval(decrement, 1000);
    }
function decrement() {
    number--;
    $("#show-number").html("<h2> Time remaining: </h2>" + "<h2>" + number + "</h2>");
    if (number === 0) {
        clearInterval(intervalId);  
        incorrect++;
        document.getElementById("show-questions").innerHTML = "Wrong! " + questions.Questions[round].question + correctAnswers[round];
        clearInterval(intervalID);
        clearIt();
    }
}
//code for writing out the questions 
function questioned() {
    document.getElementById("show-questions").innerHTML = "<h2>" + questions.Questions[round].title + "</h2><br>";
    for (var i = 0; i < questions.Questions[round].items.length; i++) {
        var questionBtn = $("<button>");
        questionBtn.addClass("btn normal-button");
        questionBtn.attr("value", i);
        questionBtn.text(questions.Questions[round].items[i]);
        $("#show-questions").append(questionBtn);
    }
}
//code for keeping score
function clickOn() {
$(".normal-button").click(function() {
    selection = eval($(this).attr("value"));
    if (selection == correctAnswers[round]) {
        document.getElementById("show-questions").innerHTML = "<h2>Correct! " + questions.Questions[round].title + correctAnswers[round] + "</h2>";
        document.getElementById("show-img").src="assets/images/"+ correctAnswers[round] +".png";
        var audio2 = new Audio("assets/sounds/Swing02.wav");
        audio2.play();
        correct++;
        clearIt();
        clearInterval(intervalId);
        number = 30;
        round++;
        setTimeout(function(){main();},3000);
    }
    else {
        incorrect++;
        document.getElementById("show-questions").innerHTML = "<h2>Wrong! " + questions.Questions[round].title + correctAnswers[1] + "</h2>";
        document.getElementById("show-img").src="assets/images/"+ correctAnswers[round] +".png";
        var audio2 = new Audio("assets/sounds/Swing02.wav");
        audio2.play();
        correct++;
        clearIt();
        clearInterval(intervalId);
        number = 30;
        round++;
        setTimeout(function(){main();},3000);
    }
});
}
//code for displaying score
function score() {
    document.getElementById("show-score").innerHTML = "All Done, here's how you did! <br>Correct: " + correct + "<br>Incorrect: " + incorrect;
    $("#show-img").remove();
    $("#show-questions").remove();
    clearIt();
}
//code for changing the round
function clearIt(){
    $(".normal-button").remove();
}
//running the functions
function main(){
if (round == 2) {
    score();
}
else {
    run();
    questioned();
    clickOn(); 
    }
}
main();
});

</script>

<div class="container">
    <div class="row"> 
        <div class="col-12">   
            <h1>Totally Trivia Game! Weeaboo Edition!!!</h1>
        </div>
    </div>
</div>
<div class="container">
    <div class="row"> 
        <div class="col-12"> 
            <div id="show-number"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <div id="show-questions"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <div id="show-score"></div>
        </div>
    </div>
    <div class="row">
            <div class="col-12">
                <img id="show-img"></img>
            </div>
        </div>
</div>
</body>
</html>